name: AI Agent

on:
  workflow_dispatch:

permissions:
  contents: write
  pull-requests: write

jobs:
  agent:
    runs-on: ubuntu-latest

    steps:

    - name: Baixar código
      uses: actions/checkout@v4

    - name: Mostrar regras
      run: cat .codex/rules.md

    - name: Criar alteração de teste
      run: |
        echo "// alteração automática" >> teste-agente.txt

    - name: Commit alteração
      run: |
        git config user.name "AI-Agent"
        git config user.email "ai-agent@bot.com"
        git add .
        git commit -m "IA: alteração automática"

    - name: Criar Pull Request
      uses: peter-evans/create-pull-request@v6
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        title: "IA sugeriu alteração"
        body: "Pull Request criado automaticamente."
        branch: ai-agent
